
    Работа над экспортом / импортом

    Разобрался с объектами в Drupal на Hotelzov (http://frichono.ru/). Сущности в D7 (Drupal 7), которые предстоит импортировать, содержат на 70% - 80% избыточные данные (служебная информацией и т.п.). Поэтому на стороне сайта Hotelzov я написал код, отбирающий только необходимую информацию и адаптирующий её для импорта на стороне odoo.
    На сегодня продуманы структуры данных для отправки из Hotelzov в odoo Отелей, Городов, Отельеров и Типов номеров. Павел для этой задачи в D7 создал базовый модуль экспорта, который реагирует на запрос. Дальше в этом модуле я прописал код, который готовит упрощённые структуры нужных объектов и XML-RPC запросами отправляет их в odoo.
    В odoo в модуле импорта продуман и создан функционал, позволяющий принимать данные от Hotelzov. Код модуля импорта в odoo анализирует входящие объекты:
    1. Наличее / отсутствие экспортируемого объекта (по id Hotelzov);
    2. Если объект есть в базе odoo, то проверяется дата последнего обновления и, при необходимости, данные по объкту обновляются;
    3. Если id не найден -- объект создаётся.
    Полный цикл отправки / получения объекта реализован пока только для Отелей. Города, Отельеры, Комнаты и Заказы будут обрабатываться, в принципе, по такой же схеме, только при их добавлении в базу нужно будет тщательно проработать установку связей между объектами. Умозрительно я это хорошо себе представляю. Думаю проблем возникнуть не должно.
    Относительно Заказов (бронирования), в odoo я базовый объект реализовал. Павел в модуле экспорта на Hotelzov прописал два хука для Заказов (две ф-ции реагирующие на события с Заказами). Я их пока не тестировал.
    Вообще, тестировать пока получается только по отдельности -- экспорт на стороне Hotelzov, импорт на odoo. Чтобы можно было полноценно тестировать, я заказал у провайдера выделенный IP адрес, только пока ещё не настроил сеть, нужна помощь провайдера, сегодня, надеюсь решить этот вопрос.


    Задачи на ближайшее время.

    1. Доделать экпорт / импорт для всех базовых объектов для первоначальной загрузки в odoo. Продумать и реализовать все необходимые связи между ними.
    2. Реализовать обновление базовых объектов при дальнейшем добавлении / изменении. Нужно будет опять обратиться к Павлу.
    3. Разобраться с Заказами. Работа с D7 и odoo. Тот же экспорт / импорт, только по событиям добавления / изменения.
    4. Продумать алгоритм создания Счетов. Добавление Заказов в Счета (в основном, программирование в odoo на Python)

    И ещё...

    5. Разработать печатные формы внешних документов.
    6. Разобраться в odoo c отправкой док-тов по e-mail.
    7. Разработать и написать фильтры и поиск в списках объектов для комфортной работы менеджеров.

    Ну и всегда найдётся что-то ещё.

    27-28.04.2021.


Работа над экспортом / импортом

Разобрался с объектами в Drupal на Hotelzov (http://frichono.ru/). Сущности в D7 (Drupal 7), которые предстоит импортировать, содержат на 70% - 80% избыточные данные (служебная информацией и т.п.). Поэтому на стороне сайта Hotelzov я написал код, отбирающий только необходимую информацию и адаптирующий её для импорта на стороне odoo.
На сегодня продуманы структуры данных для отправки из Hotelzov в odoo Отелей, Городов, Отельеров и Типов номеров. Павел для этой задачи в D7 создал базовый модуль экспорта, который реагирует на запрос. Дальше в этом модуле я прописал код, который готовит упрощённые структуры нужных объектов и XML-RPC запросами отправляет их в odoo.
В odoo в модуле импорта продуман и создан функционал, позволяющий принимать данные от Hotelzov. Код модуля импорта в odoo анализирует входящие объекты:
1. Наличее / отсутствие экспортируемого объекта (по id Hotelzov);
2. Если объект есть в базе odoo, то проверяется дата последнего обновления и, при необходимости, данные по объкту обновляются;
3. Если id не найден -- объект создаётся.
Полный цикл отправки / получения объекта реализован пока только для Отелей. Города, Отельеры, Комнаты и Заказы будут обрабатываться, в принципе, по такой же схеме, только при их добавлении в базу нужно будет тщательно проработать установку связей между объектами. Умозрительно я это хорошо себе представляю. Думаю, проблем возникнуть не должно.
Относительно Заказов (бронирования), в odoo я базовый объект реализовал. Павел в модуле экспорта на Hotelzov прописал два хука для Заказов (две ф-ции реагирующие на события с Заказами). Я их пока не тестировал.
Вообще, тестировать пока получается только по отдельности -- экспорт на стороне Hotelzov, импорт на odoo. Чтобы можно было полноценно тестировать, я заказал у провайдера выделенный IP адрес, только пока ещё не настроил сеть, нужна помощь провайдера, сегодня, надеюсь решить этот вопрос.


Задачи на ближайшее время.

1. Доделать экспорт / импорт для всех базовых объектов для первоначальной загрузки в odoo. Продумать и реализовать все необходимые связи между ними.
2. Реализовать обновление базовых объектов при дальнейшем добавлении / изменении. Нужно будет опять обратиться к Павлу.
3. Разобраться с Заказами. Работа с D7 и odoo. Тот же экспорт / импорт, только по событиям добавления / изменения.
4. Продумать алгоритм создания Счетов. Добавление Заказов в Счета (в основном, программирование в odoo на Python)

И ещё...

5. Разработать печатные формы внешних документов.
6. Разобраться в odoo c отправкой док-тов по e-mail.
7. Разработать и написать фильтры и поиск в списках объектов для комфортной работы менеджеров.

Ну и всегда найдётся что-то ещё.

27-28.04.2021.

